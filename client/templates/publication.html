<template name="publication">
  <div id="viewer">
      <div class="display">
        <div class="meta-menu">
          {{> publicationMetaMenu}}
        </div>
        <div class="annotations">
          <ul class="annotations-list">
            {{> publicationAnnotations}}
          </ul>
        </div>
        {{> publicationDisplay}}
      </div>
  </div>
</template>

<template name="publicationMetaMenu">
  <i class="icon-menu"></i>
  <div class="meta-content description">
    <p><b>{{publication.title}}</b></p>
    <p class="authors">
      {{#each publication.authors}}
        <span><a href="{{profilePath slug}}">{{foreNames}} {{lastName}}</a></span>
      {{/each}}
    </p>
    <p>Published in: {{publication.source}}</p>
    <p>{{publication.created}}</p>
  </div>
</template>

<template name="publicationDisplay">
  {{#constant}}
    <div class="display-wrapper"></div>
  {{/constant}}
</template>

<template name="publicationAnnotations">
  {{#each annotations}}
    {{> publicationAnnotationsItem}}
  {{/each}}
</template>

<template name="publicationAnnotationsItem">
  <li class="annotation{{#if highlighted}} highlighted{{/if}}">
    <div class="text" contenteditable="true">
      {{body}}
    </div>
  </li>
</template>

<template name="highlightsControl">
  {{! TODO: Display delete buttons only to authors of highlights (for now) }}
  <button class="delete">Delete</button>
</template>
