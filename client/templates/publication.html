<template name="publication">
  <div id="viewer">
      <div class="display">
        <div class="meta-menu">
          <i class="icon-menu"></i>
          <div class="meta-description">
            <p><b>{{publication.title}}</b></p>
            <p class="authors">
              {{#each publication.authors}}
                <span><a href="{{profilePath slug}}">{{foreNames}} {{lastName}}</a></span>
              {{/each}}
            </p>
            <p>Published in: {{publication.source}}</p>
            <p>{{publication.created}}</p>
          </div>
        </div>
        {{> publicationScroller}}
        <div class="annotations">
          <ul class="annotations-list">
            {{> publicationAnnotations}}
              <li class="annotation">
                <div class="text" contenteditable="true">
                  Hello
                </div>
              </li>
              <li class="annotation">
                <div class="text" contenteditable="true">
                  World
                </div>
              </li>
          </ul>
        </div>
        {{#constant}}
          <div class="display-wrapper"></div>
        {{/constant}}
      </div>
  </div>
</template>

<template name="publicationScroller">
  <div class="scroller">
    {{#each sections}}
      <div class="section" style="height: {{heightPercentage}}%; top: {{topPercentage}}%"></div>
    {{/each}}
    <div class="viewport"></div>
  </div>
</template>

<template name="publicationAnnotations">
  {{#each annotations}}
    {{> publicationAnnotationsItem}}
  {{/each}}
</template>

<template name="publicationAnnotationsItem">
  <li class="annotation{{#if highlighted}} highlighted{{/if}}">
    <div class="text" contenteditable="true">
      {{body}}
    </div>
  </li>
</template>
