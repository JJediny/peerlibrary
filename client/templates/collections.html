<template name="collections">
  <h1>Collections</h1>

  <div class="row">
    <div class="col12 catalog">
      {{> catalogControls catalogSettings}}
      {{> noCollections}}
      {{> collectionsList documents}}
      {{> collectionsLoading}}
    </div>
    {{> myCollections}}
  </div>
</template>

<template name="collectionsList">
  {{#if this}}
  <ol class="item-list">
    {{#each this}}
      {{> collectionCatalogItem}}
    {{/each}}
  </ol>
  {{/if}}
</template>

<template name="noCollections">
  {{#if noDocuments}}
  <p class="status">
    {{#if documentsFilter}}
      The filter matches no collections.
    {{else}}
      There are no collections yet.
      {{#if currentPersonId}}
        Write the first by commenting on one of the publications.
      {{else}}
        Sign in and write the first.
      {{/if}}
    {{/if}}
  </p>
  {{/if}}
</template>

<template name="collectionsLoading">
  {{#if documentsLoading}}
    <p class="status">Loading â€¦</p>
  {{else}}
    {{#if moreDocuments}}
      <button class="load-more">Load more</button>
    {{/if}}
  {{/if}}
</template>

<template name="myCollections">
  <div class="col4 push12 sidebar">
    <h2>My Collections</h2>
    {{#if myCollections.count}}
      <ol class="item-list">
        {{#each myCollections}}
          {{> collectionCatalogItem}}
        {{/each}}
      </ol>
    {{else}}
      {{> noMyCollections}}
    {{/if}}
    {{> addNewCollection}}
  </div>
</template>

<template name="noMyCollections">
  <p class="no-collections hint">You don't have any collections. Create one below.</p>
</template>

<template name="addNewCollection">
  <h3>Create a new collection</h3>
  <form class="add-collection input-and-buttons">
    <button type="submit" class="add">Create</button>
    <div class="input"><input type="text" class="name" placeholder="Collection name" /></div>
  </form>
</template>

<template name="collectionInlineItem">
  <a class="inline-item collection" {{#unless noLink}}href="{{collectionIdPath _id}}"{{/unless}}>
    <i class="avatar only-icon icon-collection" title="Collection"></i>
    <span class="name" title="{{_id}}">a:{{_id}}</span>
  </a>
</template>

<template name="collectionCatalogItem">
  <li class="catalog-item collection" data-collection-id="{{_id}}">
    <div class="details">
      {{> collectionCatalogItemName}}
      <p class="show-in-sidebar"><i class="icon-publication"></i> {{countDescription}}</p>
    </div>

    <a class="full-item-link" href="{{collectionPathFromId _id slug}}"></a>
  </li>
</template>

<template name="collectionCatalogItemName">
  <h2>
    <a href="{{collectionPathFromId _id slug}}" class="actionable">
      {{name}}
    </a>
  </h2>
</template>
