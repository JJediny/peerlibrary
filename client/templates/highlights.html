<template name="highlights">
  <h1>Highlights</h1>

  <div class="row">
    <div class="col12 catalog">
      {{> catalogControls catalogSettings}}
      {{> noHighlights}}
      {{> highlightsList documents}}
      {{> highlightsLoading}}
    </div>
    {{> myHighlights}}
  </div>
</template>

<template name="highlightsList">
  {{#if this}}
    <ol class="item-list">
      {{#each this}}
        {{> highlightCatalogItem}}
      {{/each}}
    </ol>
  {{/if}}
</template>

<template name="noHighlights">
  {{#if noDocuments}}
    <p class="status">
      {{#if documentsFilter}}
        The filter matches no highlights.
      {{else}}
        There are no highlights yet.
        {{#if currentPersonId}}
          Create the first by highlighting text in one of the publications.
        {{else}}
          Sign in and create the first.
        {{/if}}
      {{/if}}
    </p>
  {{/if}}
</template>

<template name="highlightsLoading">
  {{#if documentsLoading}}
    <p class="status">Loading â€¦</p>
  {{else}}
    {{#if moreDocuments}}
      <button class="load-more">Load more</button>
    {{/if}}
  {{/if}}
</template>

<template name="myHighlights">
  <div class="col4 push12 sidebar">
    {{#if currentPersonId}}
      {{! TODO: Add user's highlights? }}
    {{/if}}
    {{> footer}}
  </div>
</template>

<template name="highlightInlineItem">
  {{#with highlightReference _id this}}
    <a class="inline-item highlight"{{#unless noLink}} href="{{highlightPathFromId _id}}"{{/unless}}>
      <i class="avatar only-icon icon-highlight" title="Highlight"></i>
      <span class="name"{{#if title}} title="{{title}}"{{/if}>{{text}}</span>
    </a>
  {{/with}}
</template>

<template name="highlightCatalogItem">
  <li class="catalog-item highlight">
    <div class="details">
      <p class="actionable">{{> personInlineItem author}} highlighted in {{> publicationInlineItem publication}}</p>
      <blockquote>
        {{quote}}
      </blockquote>
    </div>

    <a class="full-item-link" href="{{highlightIdPath _id}}"></a>
  </li>
</template>
